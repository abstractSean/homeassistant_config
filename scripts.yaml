'1543692491327':
  alias: Hello world
  sequence:
  - data:
      name: alexa
    service: python_script.hello_world
start_hockey:
  alias: Start hockey
  sequence:
  - data:
      message: ''
    service: notify.start_hockey
stop_hockey:
  alias: Stop hockey
  sequence:
  - data:
      entity_id: light.watch_hockey
    service: homeassistant.turn_off
goal_start:
  alias: Goal start
  sequence:
  - data:
      entity_id: script.record_goal_light
    service: script.turn_on
  - data:
      entity_id: script.goal_repeat
    service: script.turn_on
goal_loop:
  alias: Goal loop
  sequence:
  - condition: state
    entity_id: input_boolean.goaling
    state: 'on'
  - data:
      entity_id: light.tv
      rgb_color:
      - 255
      - 0
      - 0
      brightness: 255
      transition: 0.25
    service: homeassistant.turn_on
  - delay:
      seconds: 0.25
  - condition: state
    entity_id: input_boolean.goaling
    state: 'on'
  - data:
      entity_id: light.tv
    service: homeassistant.turn_off
  - data:
      entity_id: script.goal_repeat
    service: script.turn_on
goal_repeat:
  alias: Goal repeat
  sequence:
  - condition: state
    entity_id: input_boolean.goaling
    state: 'on'
  - delay:
      seconds: 0.125
  - data:
      entity_id: script.goal_loop
    service: script.turn_on
goal_stop:
  alias: Goal stop
  sequence:
  - data:
      entity_id: script.goal_loop
    service: homeassistant.turn_off
  - data:
      entity_id: script.goal_repeat
    service: homeassistant.turn_off
  - data:
      entity_id: light.tv
    service: homeassistant.turn_off
  - data:
      entity_id: script.restore_goal_light
    service: script.turn_on
record_goal_light:
  alias: record original goal light state
  sequence:
  - entity_id: input_boolean.light_saved
    service_template: >
      {% if is_state('light.tv', 'on') %}
        input_boolean.turn_on
      {% else %}
        input_boolean.turn_off
      {% endif %}
  - entity_id: light.tv
    service_template: >
      {% if is_state('light.tv', 'off') %}
        light.turn_on
      {% endif %}
  - delay:
      seconds: 0.25
  - data_template:
      entity_id: input_number.brightness_saved
      value: "{{ states.light.tv.attributes.brightness | float}}"
    service: input_number.set_value
  - data_template:
      entity_id: input_number.color_temp_saved
      value: "{{ states.light.tv.attributes.color_temp | float}}"
    service: input_number.set_value
restore_goal_light:
  alias: restore original goal light status
  sequence:
  - data_template:
      entity_id: light.tv
      brightness: '{{states.input_number.brightness_saved.state | int}}'
      color_temp: '{{states.input_number.color_temp_saved.state | int}}'
    service: light.turn_on
  - entity_id: light.tv
    service_template: >
      {% if is_state('input_boolean.light_saved', 'on') %}
        light.turn_on
      {% else %}
        light.turn_off
      {% endif %}
